import{a as e}from"./canvasWorkerMessaging.09b47d9d.js";import"./snakeGameContext.982ae7a2.js";const n=new function(){return new Worker("/acthung-webrtc/assets/offscreenGameWorker.f1b6a5bb.js",{type:"module"})};export default async(s,o)=>{if(!(s instanceof HTMLCanvasElement))throw new Error(`Supplied canvas is of type ${s}, HTMLCanvasElement was expected. Only HTMLCanvasElement can be transferred offscreen`);const t=s.transferControlToOffscreen();n.postMessage(t,[t]);const a=e(n),r=new Map;return a.on("snakeCollision",(e=>{var n;null==(n=r.get(e))||n()})),{run(){a.send("run",void 0)},stop(){a.send("stop",void 0)},destroy(){a.send("destroy",void 0)},inputSnakeData:({id:e,color:n,onCollision:s})=>(a.send("inputSnakeData",{id:e,color:n}),r.set(e,s),n=>{a.send("turn",{id:e,turn:n})})}};
