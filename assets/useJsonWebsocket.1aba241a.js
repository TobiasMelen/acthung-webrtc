var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(n,t,s)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;import{s as o,j as a,n as l,a as i,b as c}from"./valueConverters.dc38a941.js";import{l as u,y as d,d as f}from"./vendor.620d3140.js";const p="wss://signaling-server.tobbes.site/ws",b="white",g='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif',m=["#3f5","#f24","#46f","#ef2","#d3f","#f9b","#fff"],v={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},y={playerState:a,gameState:a,ping:l,err:a},S={setColor:i,setReady:c,setName:i,allowSinglePlayer:c,turn:l,ping:l};function w(e,n){return j(e,n)(y,S,"ping")}function O(e,n){return j(e,n)(S,y)}function j(e,n){return o({send:e=>"open"===n.readyState&&n.send(e),bindReceive:t=>(n.addEventListener("message",(e=>t(e.data))),()=>{n.close(),e.close()})})}function E(e,o=5){const[a,l]=u(0),i=a>o,[c,p]=u();d((()=>{p((e=>{e&&(e.onclose=null,null==e||e.close())})),l(0)}),[e]),d((()=>{if(!e||null!=c||i)return;const n=new WebSocket(e);let t;return n.onclose=()=>{t=window.setTimeout((()=>{l((e=>e+1)),p(void 0)}),1e3)},n.onopen=()=>{p(n),l(0)},n.onerror=()=>n.close(),()=>{window.clearTimeout(t)}}),[e,a,c]);const b=f((()=>c?{addListener(e){const n=({data:n})=>e(JSON.parse(n));return c.addEventListener("message",n),()=>c.removeEventListener("message",n)},send(e){c.send(JSON.stringify(e))}}:null),[c]);return null==b?{status:i?"failed":"connecting"}:((e,o)=>{for(var a in o||(o={}))t.call(o,a)&&r(e,a,o[a]);if(n)for(var a of n(o))s.call(o,a)&&r(e,a,o[a]);return e})({status:"connected"},b)}export{m as A,v as D,p as S,b as a,g as b,w as c,O as d,E as u};
//# sourceMappingURL=useJsonWebsocket.1aba241a.js.map
