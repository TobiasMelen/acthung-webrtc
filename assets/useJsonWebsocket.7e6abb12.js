var e=Object.defineProperty,n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(n,t,s)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;import{s as a,j as o,n as l,a as c,b as i}from"./valueConverters.45a54a63.js";import{l as u,y as f,d}from"./vendor.afcc7ec4.js";const p={playerState:o,gameState:o,ping:l,err:o},b={setColor:c,setReady:i,setName:c,turn:l,ping:l};function m(e,n){return y(e,n)(p,b,"ping")}function g(e,n){return y(e,n)(b,p)}function y(e,n){return a({send:e=>"open"===n.readyState&&n.send(e),bindReceive:t=>(n.addEventListener("message",(e=>t(e.data))),()=>{n.close(),e.close()})})}const v="wss://signaling-server.tobbes.site",w="white",S='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif',O=["#3f5","#f24","#46f","#ef2","#d3f","#f9b","#fff"],j={iceServers:[{urls:["stun:stun.l.google.com:19302"]},{urls:["turn:relay.backups.cz"],credential:"webrtc",username:"webrtc"}]};function N(e,a=5){const[o,l]=u(0),c=o>a,[i,p]=u();f((()=>{p((e=>{e&&(e.onclose=null,null==e||e.close())})),l(0)}),[e]),f((()=>{if(!e||null!=i||c)return;const n=new WebSocket(e);let t;return n.onclose=()=>{t=window.setTimeout((()=>{l((e=>e+1)),p(void 0)}),1e3)},n.onopen=()=>{p(n),l(0)},n.onerror=()=>n.close(),()=>{window.clearTimeout(t)}}),[e,o,i]);const b=d((()=>i?{addListener(e){i.addEventListener("message",(({data:n})=>e(JSON.parse(n))))},send(e){i.send(JSON.stringify(e))}}:null),[i]);return null==b?{status:c?"failed":"connecting"}:((e,a)=>{for(var o in a||(a={}))t.call(a,o)&&r(e,o,a[o]);if(n)for(var o of n(a))s.call(a,o)&&r(e,o,a[o]);return e})({status:"connected"},b)}export{O as A,j as D,v as S,w as a,S as b,m as c,g as d,N as u};
//# sourceMappingURL=useJsonWebsocket.7e6abb12.js.map
